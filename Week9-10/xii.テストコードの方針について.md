# テストコードの方針について説明できる

以下のドキュメントを読んだ上で、問に答えてください。

- [【初心者向け】テストコードの方針を考える（何をテストすべきか？どんなテストを書くべきか？）](https://qiita.com/jnchito/items/2a5d3e15761fd413657a)
- [テストがうまくいかないプロジェクトに捧ぐ、正しいテストの考え方](https://qiita.com/geshi/items/74ed21615e1ba2ad539d)

## 1. テストコードの目的

テストコードを書く理由は、私たちが作ったプログラムがちゃんと動くか確認するためです。プログラミングはとても複雑で、思わぬところで間違いが起きてしまうことがあります。

プログラムが想定通りに動くかをチェックするためのコードを書くのが、テストコードです。そして、これらのテストコードを実行して、全てが問題なく動くことを確認するのがテストです。

テストコードがあると、新しい機能を追加したり、既存の機能を変更したりしたときに、それが他の部分に悪影響を及ぼしていないかをすぐに確認することができます。これにより、エラーを早期に見つけ出し、修正することができます。

以下は、テストコードの一例です。これは、足し算の関数`add`が正しく動くかをチェックするテストコードです。

```python
def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
    assert add(0, 0) == 0
```

このコードでは、`add`関数に2と3を足すと5になる、-1と1を足すと0になる、0と0を足すと0になる、という期待する結果が正しいかをチェックしています。もし、このテストが通らなければ、`add`関数に何か問題があるということになります。

プログラミングを学ぶ初心者の皆さんにとって、テストコードを書くことはとても大切です。なぜなら、自分が書いたコードが正しく動作するかを自分で確認できるようになるからです。それにより、より高品質なプログラムを作ることができるようになります。

## 2. テストコードの対象

テストコードを書くべき対象は、私たちが作ったプログラムの中で、動作を確認すべきすべての部分です。

たとえば、あなたが絵を描いていると想像してみてください。最初に全体の構図を描き、その後、細部の色付けや仕上げをしていきますよね。そして最後に、全ての部分が上手く描けているか確認するために絵全体を見てみます。

プログラムも同じようなものです。プログラムの各部分が全体の中できちんと動いているか確認する必要があります。それがテストコードを書く対象です。

例えば、次のような足し算の関数 `add` を書いたとします。

```python
def add(x, y):
    return x + y
```

この関数が正しく動くか確認するためには、いろいろな数字の組み合わせを使って足し算をしてみて、結果が正しいか確認するテストコードを書きます。

```python
def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
    assert add(0, 0) == 0
```

このように、テストコードを書く対象はプログラムの各部分で、それらが想定通りに動くかをチェックします。

しかし、全ての部分をテストすることは時には困難かもしれません。その場合、特に重要な部分、例えば計算ロジックやデータを扱う部分などを優先的にテストすると良いでしょう。

また、新たにコードを追加したり、既存のコードを変更したときもテストが必要です。なぜなら、その変更が他の部分に影響を及ぼしていないかを確認するためです。これを行うことで、早期に問題を見つけて修正することができ、品質の高いプログラムを維持することができます。

## 3. テストコードの対象外

テストコードを書く必要のない対象は、一般的に以下のようなケースが考えられます：

1. **外部サービスやライブラリの基本的な機能**: 外部のライブラリやサービス（たとえば、Pythonの標準ライブラリやデータベースなど）は、それ自体がテストされているはずです。ですから、それらの基本的な機能を再度テストする必要はありません。例えば、Pythonの足し算の演算子 `+` が正しく動くかをテストする必要はありません。

2. **非常に単純なコード**: 例えば、単に値を返すだけの非常にシンプルな関数などは、その動作をテストするコストがテストの価値を上回る場合があります。

3. **ユーザーインターフェース (UI)**: UIのテストは非常に難しく、多くの場合、自動化することが困難です。たとえば、ウェブサイトの色やフォント、配置などは、自動化されたテストよりも人間の目によるレビューの方が効果的な場合があります。

それぞれのプロジェクトにおいてテストの必要性は異なるため、どの部分をテストするか、またはテストしないかは、そのプロジェクトの目的や必要性によります。ただし、このようなケースでも、プロジェクトが成長してコードが複雑になったり、その部分のコードが頻繁に変更されるようになったりした場合には、テストコードを追加することを検討すべきです。

## 4. テストコードを書くときに意識すべきこと

テストコードを書くときには、以下のような点に注意すると良いです。

1. **明確な目的**: 各テストは明確な目的を持つべきです。つまり、そのテストが何を確認するためのものなのかをはっきりさせます。そして、テストの名前やコメントを通じて、その目的を明確に表現します。

2. **独立性**: テストは他のテストから独立しているべきです。一つのテストが失敗したからといって、他のテストが失敗することがないようにします。これは、各テストがそれ自体で完結していることを確認するために重要です。

3. **具体的な値を使用する**: テストで使用するデータは、可能な限り具体的な値を使用します。これにより、テストが何を確認するものなのかをはっきりと示すことができます。

4. **異常系のテストも忘れずに**: プログラムがうまくいく場合だけでなく、うまくいかない場合（例えば、間違った入力が与えられた場合など）についてもテストします。これにより、予期せぬエラーからプログラムを守ることができます。

例えば、以下のようなテストコードでは、正常系（期待通りの入力が与えられた場合）だけでなく、異常系（期待しない入力が与えられた場合）についてもテストしています。

```python
def test_add():
    # 正常系
    assert add(2, 3) == 5

    # 異常系
    try:
        add("2", 3)
    except TypeError:
        pass
    else:
        assert False, "Expected TypeError"
```

以上のように、テストコードを書くときには、何をテストするのかを明確にし、テストが独立していることを確認し、具体的な値を使用し、異常系のテストも行うということを意識すると良いです。